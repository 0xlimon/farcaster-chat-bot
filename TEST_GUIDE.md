# راهنمای تست و اجرای چت بات فارکستر

این راهنما به شما کمک می‌کند تا چت بات فارکستر را به صورت محلی اجرا کرده و تست کنید. مراحل زیر را به ترتیب دنبال کنید.

## نیازمندی‌ها

- Node.js (نسخه 18 یا بالاتر)
- Yarn یا NPM
- API Key برای سرویس هوش مصنوعی (Hyperbolic یا OpenAI)
- حساب کاربری فارکستر

## راه‌اندازی پروژه

1. **نصب وابستگی‌ها**

```bash
cd farcaster-chatbot-frame
yarn install
```

یا با استفاده از NPM:

```bash
cd farcaster-chatbot-frame
npm install
```

2. **تنظیم متغیرهای محیطی**

فایل `.env.local` را در ریشه پروژه بررسی کنید و API Key خود را برای سرویس هوش مصنوعی قرار دهید:

```
# AI API Configuration
AI_API_URL=https://api.hyperbolic.xyz/v1/chat/completions
AI_API_KEY=your_api_key_here
```

3. **اجرای سرور توسعه**

```bash
yarn dev
```

یا با استفاده از NPM:

```bash
npm run dev
```

4. **دسترسی به چت بات**

به آدرس `http://localhost:3000` در مرورگر خود بروید. اکنون باید رابط کاربری چت بات را ببینید.

## تست ویژگی‌ها

### 1. تست چت با هوش مصنوعی

1. پیامی را در فیلد ورودی پایین صفحه وارد کنید
2. دکمه ارسال (یا کلید Enter) را فشار دهید
3. منتظر پاسخ چت بات شوید
4. مطمئن شوید که پاسخ دریافتی منطقی و مرتبط با پیام شما است

### 2. تست رابط کاربری و طراحی ریسپانسیو

1. **حالت روشن/تاریک**: تنظیمات مرورگر یا سیستم عامل خود را بین حالت روشن و تاریک تغییر دهید تا اطمینان حاصل کنید که چت بات به درستی با هر دو حالت سازگار است.

2. **تست ریسپانسیو**: سایز پنجره مرورگر را تغییر دهید یا از DevTools مرورگر (F12) برای شبیه‌سازی دستگاه‌های مختلف استفاده کنید. مطمئن شوید که:
   - حباب‌های چت به درستی نمایش داده می‌شوند
   - فیلد ورودی در پایین صفحه ثابت می‌ماند
   - آواتارهای کاربر و چت بات به خوبی نمایش داده می‌شوند
   - متن‌ها به خوبی خوانده می‌شوند

3. **انیمیشن‌ها**: به انیمیشن‌های نمایش پیام‌ها و نشانگر تایپ توجه کنید. آن‌ها باید روان و بدون مشکل اجرا شوند.

4. **نمایش تصویر پروفایل**:
   - چت بات در محیط محلی نمی‌تواند به تصاویر پروفایل فارکستر دسترسی پیدا کند، اما آیکون کاربر باید نمایش داده شود.
   - در محیط تولید و با اتصال به فارکستر، تصویر پروفایل واقعی کاربر نمایش داده خواهد شد.

### 3. تست اتصال به فارکستر (نیاز به دیپلوی)

برای تست کامل اتصال به فارکستر، باید چت بات را در یک آدرس قابل دسترس از اینترنت دیپلوی کنید:

1. پروژه را در یک سرویس هاستینگ مانند Vercel یا Netlify دیپلوی کنید
2. فایل `.well-known/farcaster.json` را با مقادیر مناسب به‌روزرسانی کنید
3. در اپلیکیشن Warpcast به بخش تنظیمات توسعه‌دهنده بروید
4. آدرس دیپلوی شده چت بات را اضافه کنید
5. از طریق Warpcast با چت بات تعامل کنید

## رفع اشکال

### خطای API

اگر با خطاهایی در زمان ارسال پیام مواجه شدید:

1. مطمئن شوید که API Key معتبر در فایل `.env.local` قرار داده‌اید
2. کنسول مرورگر را برای بررسی خطاهای احتمالی باز کنید
3. لاگ‌های سرور را برای اطلاعات بیشتر بررسی کنید

### مشکلات UI

اگر رابط کاربری به درستی نمایش داده نمی‌شود:

1. مطمئن شوید که از مرورگر مدرن استفاده می‌کنید
2. CSS کش شده را پاک کنید (با فشردن Ctrl+F5 یا Cmd+Shift+R)
3. اگر از نمایشگر با رزولوشن بسیار بالا یا پایین استفاده می‌کنید، ممکن است نیاز به تنظیمات زوم مرورگر داشته باشید

### مشکلات TypeScript

اگر در زمان توسعه با خطاهای TypeScript مواجه شدید:

1. مطمئن شوید که همه وابستگی‌ها به درستی نصب شده‌اند
2. دستور `yarn build` یا `npm run build` را اجرا کنید و خطاها را بررسی کنید
3. اگر خطاها ادامه داشتند، دستور `yarn install` یا `npm install` را دوباره اجرا کنید

## بهینه‌سازی‌های پیشرفته

### سفارشی‌سازی سیستم پروفایل

برای نمایش بهتر پروفایل‌های فارکستر:

1. فایل `ChatBot.tsx` را باز کنید
2. منطق استخراج اطلاعات کاربر را بر اساس ترجیحات خود سفارشی کنید
3. استایل‌های CSS مربوط به آواتارها را در `globals.css` تغییر دهید

### تغییر شخصیت چت بات

برای تغییر شخصیت و پاسخ‌های چت بات:

1. فایل `app/api/chat/route.ts` را باز کنید
2. پیام سیستم در متغیر `messages` را ویرایش کنید:

```typescript
const messages: Message[] = [
  {
    role: 'system',
    content: 'شخصیت مورد نظر خود را اینجا وارد کنید. مثلا: شما یک دستیار مفید و دوستانه هستید...'
  },
  ...body.messages
];
```

## دیپلوی در محیط تولید

برای دیپلوی چت بات در محیط تولید:

1. مطمئن شوید که متغیرهای محیطی به درستی تنظیم شده‌اند
2. برای دیپلوی در Vercel:

```bash
yarn global add vercel
vercel
```

3. برای دیپلوی در Netlify، فایل `netlify.toml` را در ریشه پروژه ایجاد کنید:

```toml
[build]
  command = "yarn build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"
```

و سپس با CLI کار را ادامه دهید:

```bash
yarn global add netlify-cli
netlify deploy
```

## منابع بیشتر

- [داکیومنت فارکستر](https://docs.farcaster.xyz)
- [داکیومنت Frame v2](https://docs.farcaster.xyz/reference/frames/spec)
- [داکیومنت API هوش مصنوعی](https://example.com)
- [داکیومنت Next.js](https://nextjs.org/docs)